<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Diet Planner Pro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#4a90e2">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <h1>Diet Planner Pro</h1>
            <div class="top-bar">
                <select id="day-select" onchange="app.changeDay()">
                    <option value="lunedi">Luned√¨</option>
                    <option value="martedi">Marted√¨</option>
                    <option value="mercoledi">Mercoled√¨</option>
                    <option value="giovedi">Gioved√¨</option>
                    <option value="venerdi">Venerd√¨</option>
                    <option value="sabato">Sabato</option>
                    <option value="domenica">Domenica</option>
                </select>
                <div class="header-btns">
                    <button class="btn-sec" onclick="app.cloneDay()">Copia Giorno</button>
                    <button class="btn-sec" onclick="app.exportPDF()">Scarica PDF</button>
                </div>
            </div>
        </header>

        <section class="stats-panel">
            <div class="targets-container">
                <div class="targets-input">
                    <div class="t-box"><span>Kcal Target</span><input type="number" id="target-kcal" value="2000" onchange="app.update()"></div>
                    <div class="t-box"><span>Carb (g) <small id="perc-c">0%</small></span><input type="number" id="target-carbs" value="250" onchange="app.update()"></div>
                    <div class="t-box"><span>Prot (g) <small id="perc-p">0%</small></span><input type="number" id="target-pro" value="150" onchange="app.update()"></div>
                    <div class="t-box"><span>Fat (g) <small id="perc-f">0%</small></span><input type="number" id="target-fat" value="60" onchange="app.update()"></div>
                </div>
                <div class="progress-area">
                    <div class="bar-bg"><div id="bar-fill"></div></div>
                    <small id="kcal-label">0 / 2000 kcal</small>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="macroChart"></canvas>
            </div>
        </section>

        <section class="add-food">
            <h3>Aggiungi Alimento</h3>
            <div class="input-group">
                <select id="meal-select">
                    <option value="colazione">Colazione</option>
                    <option value="spuntino">Spuntino</option>
                    <option value="pranzo">Pranzo</option>
                    <option value="merenda">Merenda</option>
                    <option value="cena">Cena</option>
                    <option value="extra">Extra</option>
                </select>
                <input type="text" id="search-input" list="food-database" placeholder="Nome..." oninput="app.checkDatabase(this.value)">
                <datalist id="food-database"></datalist>
                <input type="number" id="qty-input" placeholder="g">
            </div>
            <div class="manual-macros">
                <input type="number" id="in-kcal" placeholder="Kcal/100g">
                <input type="number" id="in-carb" placeholder="C">
                <input type="number" id="in-pro" placeholder="P">
                <input type="number" id="in-fat" placeholder="F">
                <button onclick="app.addManual()" class="btn-primary">OK</button>
            </div>
            <div class="db-management">
                <small>Database: <span id="db-count">0</span> voci</small>
                <div>
                    <button onclick="app.exportDB()" class="btn-mini">Export</button>
                    <button onclick="document.getElementById('import-db').click()" class="btn-mini">Import</button>
                    <input type="file" id="import-db" style="display:none" onchange="app.importDB(event)">
                </div>
            </div>
        </section>

        <div id="meals-list" class="meals-grid"></div>

        <section class="extra-sections">
            <div class="tool-card">
                <h3>‚öñÔ∏è Cotto/Crudo</h3>
                <div class="input-group">
                    <input type="number" id="conv-val" placeholder="g">
                    <select id="conv-type">
                        <option value="2.5">Pasta/Riso (x2.5)</option>
                        <option value="0.7">Carne/Pesce (x0.7)</option>
                        <option value="2.8">Legumi (x2.8)</option>
                    </select>
                    <button onclick="app.convert()" class="btn-primary">Vai</button>
                </div>
                <p id="conv-res"></p>
            </div>
            
            <div class="weight-card">
                <h3>üìà Peso</h3>
                <div class="input-group">
                    <input type="number" id="w-input" step="0.1" placeholder="kg">
                    <button onclick="app.addWeight()" class="btn-primary">Ok</button>
                </div>
                <div style="height: 100px;"><canvas id="weightChart"></canvas></div>
            </div>
        </section>

        <section class="shopping-card">
            <h3>üõí Lista Spesa Settimanale</h3>
            <ul id="shopping-list"></ul>
            <button onclick="app.exportShopping()" class="btn-sec" style="width:100%">Scarica Lista .txt</button>
        </section>
    </div>
    <script src="script.js"></script>
</body>
</html>